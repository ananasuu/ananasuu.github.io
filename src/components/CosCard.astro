---
const cosPortfolio = await import('../data/creative/cosplays.json').then(m => m.default);
---

<ul>
    {cosPortfolio.map((cos) => {
        const avifUrl = cos.imageUrl.replace(/\.(jpg|jpeg|png)$/i, '.avif');
        const isDisabled = !cos.buildbookUrl || cos.buildbookUrl.trim() === '';
        return (
            <li>
                <div class="infocard costume">
                    <h3>{cos.title}</h3>
                    <p class="source">{cos.source}</p>
                    <picture>
                        <source srcset={avifUrl} type="image/avif" />
                        <img src={cos.imageUrl} alt={`${cos.title} from ${cos.source}`} loading="lazy" />
                    </picture>
                    <p class="genres">{cos.genres}</p>
                    <p>{cos.description}</p>
                    <a class="button primary" href={cos.buildbookUrl || ''} aria-disabled={isDisabled ? "true" : "false"}>Build Book</a>
                </div>
            </li>
        );
    })}
</ul>